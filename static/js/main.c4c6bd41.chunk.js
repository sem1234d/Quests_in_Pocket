(window.webpackJsonpQuestsinPocket=window.webpackJsonpQuestsinPocket||[]).push([[0],{248:function(e,t,n){e.exports=n.p+"static/media/achiev-1.05917b64.png"},250:function(e,t,n){e.exports=n.p+"static/media/map.e0ba97a3.png"},304:function(e,t,n){e.exports=n(633)},383:function(e,t){},385:function(e,t){},418:function(e,t){},419:function(e,t){},504:function(e,t){},506:function(e,t){},520:function(e,t,n){e.exports=n.p+"static/media/Design-story.2ea10a94.png"},557:function(e,t){},558:function(e,t){},633:function(e,t,n){"use strict";n.r(t);n(305),n(331),n(333),n(334),n(336),n(337),n(338),n(339),n(340),n(341),n(342),n(343),n(345),n(346),n(347),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373);var a=n(0),o=n.n(a),i=n(38),l=n.n(i),c=n(74),r=n.n(c),s=n(21),u=n(27),p=n(23),m=n(22),d=n(24),h=(n(159),n(239)),f=(n(96),n(6)),g=(n(52),n(248)),E=n.n(g),b=function(e){function t(e){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(f.d,{before:o.a.createElement("div",{style:{"margin-left":"1px"}},o.a.createElement(f.b,{src:E.a,size:100})),indicator:this.props.lvlNum+" lvl"},o.a.createElement(f.h,null,this.props.title))}}]),t}(o.a.Component),k={fontSize:"150%",fontWeight:"bold"},v=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={fetchedUser:n.props.fetchedUser},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(f.e,{id:"profile-container",align:"center"},o.a.createElement(f.e,{id:"avatar-container"},o.a.createElement(f.b,{src:this.state.fetchedUser.photo_200,style:{border:"solid 3px #BF24FE"},size:150})),o.a.createElement(f.e,{id:"name-container"},o.a.createElement(f.d,{id:"name"},o.a.createElement("p",{style:k},o.a.createElement("strong",null,this.state.fetchedUser.first_name+" "+this.state.fetchedUser.last_name)))),o.a.createElement(f.g,{title:"\u0412\u0430\u0448\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f",id:"achievements-container"},o.a.createElement(b,{lvlNum:"1",title:"\u041f\u0435\u0440\u0432\u043e\u043f\u0440\u043e\u0445\u043e\u0434\u0435\u0446"})))}}]),t}(o.a.Component),w=n(103),y=n(249);w.a.init(y.a);o.a.Component;var j=n(60),C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).infoWindowRef=o.a.createRef(),n.contentElement=document.createElement("div"),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.children!==e.children&&(l.a.render(o.a.Children.only(this.props.children),this.contentElement),this.infoWindowRef.current.infowindow.setContent(this.contentElement))}},{key:"render",value:function(){return o.a.createElement(j.InfoWindow,Object.assign({ref:this.infoWindowRef},this.props))}}]),t}(o.a.Component),O=(n(533),n(250)),S=n.n(O),P={width:"100%",height:"100%",marginLeft:"auto",marginRight:"auto"},_=function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).submit=function(){n.props.checkGeo(n.state.selectedPlace)},n.onMarkerClick=function(e,t,a){n.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0})},n.submit=function(e){console.log(n.state.selectedPlace),n.props.checkGeo(n.state.selectedPlace)},n.onMapClicked=function(e){n.state.showingInfoWindow&&n.setState({showingInfoWindow:!1,activeMarker:null})},n.render=function(e){return o.a.createElement(j.Map,{google:n.props.google,style:P,zoom:16,initialCenter:{lat:44,lng:39},gestureHandling:"greedy",streetViewControl:!1,mapTypeControl:!1,zoomControl:!1,onClick:n.onMapClicked},o.a.createElement("div",null,o.a.createElement(f.c,{size:"xl",onClick:n.props.updateGeodata,level:"commerce"},o.a.createElement("p",{align:"center"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"))),n.props.marker.map((function(e,t){return o.a.createElement(j.Marker,{onClick:n.onMapClicked,id_marker:e[t].id_marker,position:e.position,name:e.name,img:e.img,img_1:e.img_1,pretext:e.pretext,text:e.text,text_end:e.text_end,answer_1:e.answer_1,answer_2:e.answer_2,answer_3:e.answer_3,but:o.a.createElement(f.c,{level:"commerce"},"\u042f \u043d\u0430 \u043c\u0435\u0441\u0442\u0435")})})),o.a.createElement(j.Marker,{onClick:n.onMarkerClick,position:{lat:59.934777,lng:30.302896},name:"\u041a\u043e\u043b\u043e\u043d\u043d\u044b \u0441\u043b\u0430\u0432\u044b",pretext:"\u041a\u043e\u043b\u043e\u043d\u043d\u044b \u0441\u043e \u0441\u0442\u0430\u0442\u0443\u044f\u043c\u0438 \u0421\u043b\u0430\u0432\u044b \u0432 \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433\u0435. \u041f\u0430\u043c\u044f\u0442\u043d\u0438\u043a \u0432 \u0447\u0435\u0441\u0442\u044c \u043f\u043e\u0431\u0435\u0434 \u041b\u0435\u0439\u0431-\u0433\u0432\u0430\u0440\u0434\u0438\u0438 \u041a\u043e\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u043a\u0430 \u0432 \u041e\u0442\u0435\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0439 \u0432\u043e\u0439\u043d\u0435 1812 \u0433\u043e\u0434\u0430 \u0431\u044b\u043b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d \u043d\u0430 \u041a\u043e\u043d\u043d\u043e\u0433\u0432\u0430\u0440\u0434\u0435\u0439\u0441\u043a\u043e\u043c \u0431\u0443\u043b\u044c\u0432\u0430\u0440\u0435 \u0432 1845-1846 \u0433\u043e\u0434\u0430\u0445. \u0410\u0432\u0442\u043e\u0440 \u0441\u0442\u0430\u0442\u0443\u0439 \u2014 \u0425. \u0414. \u0420\u0430\u0443\u0445, \u0430\u0432\u0442\u043e\u0440 \u043a\u043e\u043b\u043e\u043d\u043d \u2014 \u041a. \u0418. \u0420\u043e\u0441\u0441\u0438.",id_marker:"one_1",text:o.a.createElement("div",{style:{fontWeight:"bold",fontSize:"120%"}},o.a.createElement("p",{align:"center"},"\u041f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u044c\u0442\u0435\u0441\u044c, \u0441\u0435\u0439\u0447\u0430\u0441 \u0432\u044b \u0443\u0437\u043d\u0430\u0442\u0435 3 \u0441\u0430\u043c\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0445 \u0444\u0430\u043a\u0442\u043e\u0432 \u043e\u0431 \u044d\u0442\u043e\u043c \u043c\u0435\u0441\u0442\u0435. \u0418 \u043c\u044b \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u043c!:))"),o.a.createElement("p",null,"\u041a\u043e\u043b\u043e\u043d\u043d\u044b \u0421\u043b\u0430\u0432\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u0432 \u0438\u043e\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u043c \u043e\u0440\u0434\u0435\u0440\u0435 \u0438\u0437 \u0441\u0435\u0440\u043e\u0433\u043e \u0441\u0435\u0440\u0434\u043e\u0431\u043e\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0433\u0440\u0430\u043d\u0438\u0442\u0430.",o.a.createElement("br",null),"\u041b\u0435\u0442\u044f\u0449\u0438\u0435 \u0441\u0442\u0430\u0442\u0443\u0438 \u0431\u043e\u0433\u0438\u043d\u0438 \u041d\u0438\u043a\u0438 \u0441 \u043b\u0430\u0432\u0440\u043e\u0432\u044b\u043c\u0438 \u0432\u0435\u043d\u043a\u0430\u043c\u0438 \u0432 \u0440\u0443\u043a\u0430\u0445,\u043d\u0430\u0432\u0435\u0440\u0445\u0443, \u0431\u044b\u043b\u0438 \u0438\u0437\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u044b \u0432 \u0411\u0435\u0440\u043b\u0438\u043d\u0435 \u043f\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0443 \u0441\u043a\u0443\u043b\u044c\u043f\u0442\u043e\u0440\u0430 \u0425. \u0414. \u0420\u0430\u0443\u0445\u0430 \u0438 \u043f\u043e\u0434\u0430\u0440\u0435\u043d\u044b \u0438\u043c\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0443 \u041d\u0438\u043a\u043e\u043b\u0430\u044e I \u043a\u043e\u0440\u043e\u043b\u0435\u043c \u0424\u0440\u0438\u0434\u0440\u0438\u0445\u043e\u043c \u0412\u0438\u043b\u044c\u0433\u0435\u043b\u044c\u043c\u043e\u043c IV \u0432 1845 \u0433\u043e\u0434\u0443 \u0432 \u0437\u043d\u0430\u043a \u043e\u0442\u0432\u0435\u0442\u043d\u043e\u0439 \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c\u044e \u0437\u0430 \u043a\u043e\u043f\u0438\u0438 \u0441\u043a\u0443\u043b\u044c\u043f\u0442\u0443\u0440\u043d\u044b\u0445 \u0433\u0440\u0443\u043f\u043f \xab\u0423\u043a\u0440\u043e\u0449\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u044f\xbb \u041f. \u041a. \u041a\u043b\u043e\u0434\u0442\u0430 (\u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b \u043d\u0430 \u0410\u043d\u0438\u0447\u043a\u043e\u0432\u043e\u043c \u043c\u043e\u0441\u0442\u0443).")," "),end:o.a.createElement("div",{style:{fontWeight:"bold",fontSize:"120%"}},o.a.createElement("p",null,"\u0422\u0440\u0435\u0442\u0438\u0439 \u0444\u0430\u043a\u0442: \u0412\u044b\u0441\u043e\u0442\u0430 \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u043e\u043b\u043e\u043d\u043d\u044b \u2014 12 \u043c\u0435\u0442\u0440\u043e\u0432, \u0432\u044b\u0441\u043e\u0442\u0430 \u0441\u0442\u0430\u0442\u0443\u0438 \u2014 2,5 \u043c\u0435\u0442\u0440\u0430.")),pollQuestions:"\u041a\u0430\u043a \u0432\u044b \u0434\u0443\u043c\u0430\u0435\u0442\u0435 \u043a\u0430\u043a\u043e\u0439 \u0432\u044b\u0441\u043e\u0442\u044b \u044d\u0442\u0438 \u043a\u043e\u043b\u043e\u043d\u043d\u044b?",answer_1:"12 \u043c\u0435\u0442\u0440\u043e\u0432",answer_2:"13 \u043c\u0435\u0442\u0440\u043e\u0432",answer_3:"15 \u043c\u0435\u0442\u0440\u043e\u0432",but:o.a.createElement(f.c,{level:"commerce",onClick:n.submit},n.state.nameButton)}),o.a.createElement(j.Marker,{onClick:n.onMarkerClick,position:{lat:59.934777,lng:30.302896},id_marker:"I",icon:{url:S.a,anchor:new n.props.google.maps.Point(32,32),scaledSize:new n.props.google.maps.Size(32,51)},name:"\u042d\u0442\u043e \u0432\u044b"}),o.a.createElement(C,{marker:n.state.activeMarker,visible:n.state.showingInfoWindow},o.a.createElement(f.e,{align:"center"},o.a.createElement("img",{src:n.state.selectedPlace.img,style:{width:"90%",height:"90%"}}),o.a.createElement("h1",null,n.state.selectedPlace.name),o.a.createElement("p",null,n.state.selectedPlace.pretext),n.props.errorGeo,n.state.selectedPlace.but)))};n.props.geoData;return n.state={nameButton:"\u042f \u043d\u0430 \u043c\u0435\u0441\u0442\u0435",showingInfoWindow:!1,activeMarker:{},selectedPlace:{}},n}return Object(d.a)(t,e),t}(o.a.Component),x=Object(j.GoogleApiWrapper)({apiKey:"AIzaSyCL0U2diIKJtBb5gmgyUsRvpSIIKIfKCv0"})(_),M=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(f.e,{align:"center"},this.props.selectedPlace.end,o.a.createElement(f.c,{size:"xl",level:"commerce",onClick:this.props.theEnd},"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c"))}}]),t}(o.a.Component),I=(n(534),{outline:"none",width:"100%",color:"white",fontFamily:"Arial",padding:"20px 30px",borderRadius:"10px",backgroundImage:"linear-gradient(to right, #9EEFE1 0%, #4830F0 51%, #9EEFE1 100%)",backgroundSize:"200%",boxShadow:" 0 0 20px rgba(0,0,0,.1)",transition:".5s",marginTop:"1.5%"}),z=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(f.e,null,o.a.createElement(f.d,{align:"center"},o.a.createElement("p",null,o.a.createElement("strong",null,this.props.selectedPlace.pollQuestions))),o.a.createElement(f.c,{id:"falseBut",onClick:this.props.getAns,style:I},this.props.selectedPlace.answer_1),o.a.createElement(f.c,{id:"trueBut",onClick:this.props.getAns,style:I},this.props.selectedPlace.answer_2),o.a.createElement(f.c,{id:"falseBut",onClick:this.props.getAns,style:I},this.props.selectedPlace.answer_3))}}]),t}(o.a.Component),G=function(e){function t(){return Object(s.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(f.e,{align:"center"},o.a.createElement(f.b,{src:this.props.selectedPlace.img_1,size:200}),this.props.selectedPlace.text)}}]),t}(o.a.Component),L=(n(97),n(230)),U=(n(58),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={activeTab:"questions"},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"connect",value:function(){L.get("http://localhost/index.php?type=get_all").then((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(f.e,null,o.a.createElement(f.m,{theme:"light"},o.a.createElement(f.n,{onClick:function(){return e.setState({activeTab:"questions"})},selected:"questions"===this.state.activeTab},"\u0417\u0430\u0434\u0430\u043d\u0438\u044f"),o.a.createElement(f.n,{onClick:function(){return e.setState({activeTab:"rr"})},selected:"rr"===this.state.activeTab},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433")),"questions"===this.state.activeTab?o.a.createElement(f.e,null,o.a.createElement("p",null,"KLLLLLLLLLLLL"),o.a.createElement("button",{onClick:this.connect},"bg")):null)}}]),t}(o.a.Component)),W=(o.a.Component,n(251)),T=n.n(W),q=n(252),D=n.n(q),A=n(253),F=n.n(A),B=(n(632),n(102),n(230)),K=new h.VKMiniAppAPI,R=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).onClickMap=function(e){B.get("https://www.questsinpocket.com/vk/index.php?type=get_all_points").then((function(e){console.log(e.data),n.setState({marker:e.data})})),n.setState({popout:o.a.createElement(f.j,null)}),K.getGeodata().then((function(e){n.setState({geoData:e}),setTimeout((function(){n.setState({activeStory:"map",popout:null})}),500),console.log(e)}))},n.updateGeodata=function(e){K.getGeodata().then((function(e){n.setState({geoData:e}),console.log(e)}))},n.closePopout=function(e){n.setState({popout:null})},n.onStoryChange=function(e){n.setState({activeStory:e.currentTarget.dataset.story})},n.onToChange=function(e){n.setState({activePanel:e.currentTarget.dataset.to})},n.num=2,n.state={activeStory:"other",activePanelMap:"map",activeTab:"questions",header:!0,popout:null,selectedPlace:null,fetchedUser:null,ball:0,access_token:null,geoData:null,marker:null,errorGeo:null,Poll:null,showEnd:!1},n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(e){var t=this;K.initApp(),K.getUserInfo().then((function(e){t.setState({fetchedUser:e}),B.post("https://www.questsinpocket.com/vk/index.php?type=create&id_vk="+e.id+"&ball=0").then((function(n){console.log(n.data),2===n.data&&B.post("https://www.questsinpocket.com/vk/index.php?type=get&id_vk="+e.id).then((function(e){t.setState({ball:e.data})}))})),console.log(e.id)}))}},{key:"getPoll",value:function(e){var t=this;B.get("https://www.questsinpocket.com/vk/index.php?type=get&vk_id=0&id="+this.state.selectedPlace.id_marker).then((function(e){t.setState({Poll:e.data})}))}},{key:"checkGeo",value:function(e,t){this.setState({popout:o.a.createElement(f.j,null)}),this.updateGeodata(),this.state.geoData.lat.toFixed(this.num)===e.position.lat.toFixed(this.num)&&this.state.geoData.long.toFixed(this.num)===e.position.lng.toFixed(this.num)?(B.post("https://www.questsinpocket.com/vk/index.php?type=get&vk_id="+this.state.fetchedUser.id+"$ball=0"),this.setState({selectedPlace:e,popout:null,activePanelMap:"quest"})):this.setState({errorGeo:o.a.createElement("p",{style:{color:"red"}},"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"),popout:null})}},{key:"openDefault",value:function(e){this.setState({popout:o.a.createElement(f.a,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,style:"cancel"},{title:"\u041e\u043a",autoclose:!0}],onClose:this.closePopout},o.a.createElement("p",null,"\u0414\u043b\u044f \u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e"))})}},{key:"render",value:function(){return o.a.createElement(f.f,{activeStory:this.state.activeStory,tabbar:o.a.createElement(f.k,null,o.a.createElement(f.l,{onClick:this.onStoryChange,selected:"profile"===this.state.activeStory,"data-story":"profile"},o.a.createElement(F.a,null)),o.a.createElement(f.l,{onClick:this.onClickMap,selected:"map"===this.state.activeStory,"data-story":"map"},o.a.createElement(D.a,null)),o.a.createElement(f.l,{onClick:this.onStoryChange,selected:"other"===this.state.activeStory,"data-story":"other"},o.a.createElement(T.a,null)))},o.a.createElement(f.o,{id:"profile",popout:this.state.popout,activePanel:"profile"},o.a.createElement(f.i,{id:"profile"},o.a.createElement(v,{fetchedUser:this.state.fetchedUser}))),o.a.createElement(f.o,{id:"map",popout:this.state.popout,activePanel:this.state.activePanelMap},o.a.createElement(f.i,{id:"map"},o.a.createElement(x,{geoData:this.state.geoData,updateGeodata:this.updateGeodata,marker:this.state.marker})),o.a.createElement(f.i,{id:"quest"},o.a.createElement(G,null),o.a.createElement(z,null),o.a.createElement(M,null))),o.a.createElement(f.o,{id:"other",header:!1,popout:this.state.popout,activePanel:"other"},o.a.createElement(f.i,{id:"other"},o.a.createElement(U,null))))}}]),t}(o.a.Component);r.a.send("VKWebAppInit"),l.a.render(o.a.createElement(R,null),document.getElementById("root"))}},[[304,1,2]]]);
//# sourceMappingURL=main.c4c6bd41.chunk.js.map